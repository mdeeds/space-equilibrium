<html>
<head>
<title>DataFile</title>
</head>
<body>

<script src="jquery-2.2.4.min.js"></script>
<script src="d3/d3.min.js"></script>
<script src="sylvester/sylvester.js"></script>
<script src="state.js"></script>
<script src="body.js"></script>
<script src="load.js"></script>


<svg width=800 height=800 />

<script>


var initialize = function(body) {
  var svgContainer = d3.select("body").select("svg");

  var look_at = $V([0,0,0]);

  var scale = Matrix.I(3).x(400 / 3e8);

  var screen_translate = $V([400, 400, 0]);

  var lineFunction = d3.svg.line()
    .x(function(d) { return d.elements[0]; })
    .y(function(d) { return d.elements[1]; })
     .interpolate("cardinal");

  var positions = body.getPositions();
  for (var i = 0; i < positions.length; ++i) {
    positions[i] = positions[i].subtract(look_at);
    positions[i] = scale.x(positions[i]);
    positions[i] = positions[i].add(screen_translate);
  }

  var lineGraph = svgContainer.append("path")
                          .attr("d", lineFunction(positions))
                          .attr("stroke", "blue")
                          .attr("stroke-width", 2)
                          .attr("fill", "none");
};


Load.load("data.json", initialize);

</script>

</body>
